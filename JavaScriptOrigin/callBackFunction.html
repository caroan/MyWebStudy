<html>
    <head>
        <meta charset="utf-8">
    </head>
    <body>
        <script>
            // 자바 스크립트에서도 함수도 객체이다.
            // 그래서 
            // 1. 변수에 함수를 담을 수 있다.
            
            function a(){}

            a = function(){}

            a = {
                b:function(){} //b는 키이자 변수, 속성, 프로퍼티 이다.
            }

            // cal -> 함수에 변수를 추가해서 리턴.
            function cal (func, num){
                return func(num);
            }

            function increase(num){
                return num+1;
            }
            function decrease(num){
                return num-1;
            }

            console.log(cal(increase, 1));
            console.log(cal(decrease, 1));

            //함수는 매개변수로도 사용 가능
            function calculate(mode){
                var funcs = {
                    'plus' : function(left, right){return left + right;},
                    'minus' : function(left, right){return left - right;}
                }

                return funcs[mode];
            }

            console.log(calculate('plus')(2, 1));
            console.log(calculate('minus')(2, 1));

            // 배열의 값으로도 함수를 사용할 수 있다.
            var process = [
                function(input) {return input + 10;},
                function(input) {return input * input;},
                function(input) {return input / 2;}
            ]

            var input = 0;

            for (var i =0; i<process.length; i++){
                input = process[i](input);
            }

            console.log(input);

            // 이렇게 함수를 변수/매개변수/리턴값으로 사용할 수 있는 '퍼스트 클래스 시티즌/오브젝트'라고 불린다.

            var numbers = [20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1];

            //위 배열을 배열 객체로 만들어 해당 객체의 내장 메소드를 호출한다.
            console.log(numbers.sort()); //숫자로 소트하지 않고 문자열로 소트를 해서 문제 발생.

            //콜백 함수 선언
            var sortfunc = function(a, b){
                console.log(a, b);
                /*if(a>b){
                    return 1;
                }
                else if(a<b){
                    return -1;
                }
                else{
                    return 0;
                }*/
                //위랑 아래랑 동일하다.(음수/양수/0 인지만 구분하므로.)
                return a-b;
            }

            console.log(numbers.sort(sortfunc)); //콜백 함수를 사용하여 소트 방식을 정의할 수 있다.

            // 비동기 처리 에서의 콜백 함수.
            // 너무 오래 걸리는 작업이 있을 경우
            // 순차적으로 작업을 진행하는 것(동기적 처리) 이 아닌
            // 나중에 시간이 있을 때 작업을 예약 하는 것을 비동기 처리라고 한다.
            // 비동기는 Ajax(asynchro + javascript + xml 이라는 뜻)로 작업 가능.
        
        </script>
    </body>
</html>